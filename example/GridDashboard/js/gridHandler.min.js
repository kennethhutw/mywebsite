!function(e){e.fn.gridHandler=function(t){function i(e,t){var i=(new ol.geom.Point([e,t]).getCoordinates(),ol.animation.pan({duration:2e3,source:map.getView().getCenter()}));map.beforeRender(i),map.getView().setCenter(ol.proj.transform([t,e],"EPSG:4326","EPSG:3857")),map.getView().setZoom(5)}var a,d=[],n={dimX:50,dimY:50,onSelect:function(){},onHover:function(){},onFilter:function(){},onStart:function(){},onEnd:function(){},editable:!1,draggable:!1,mode:""},s=e.extend(!0,{},n,t),g=function(){a=e(".gridster ul").gridster({widget_margins:[5,5],widget_base_dimensions:[n.dimX,n.dimY],draggable:{handle:"div.panel-heading, div.panel-heading *"},resize:{enabled:!0,max_size:[40,20],min_size:[8,4],stop:function(i,a,d){var n=(this.resize_coords.data.height,this.resize_coords.data.width,d.data("widget-id")),s=(d.data("widget-name"),d.data("widget-type"),0);e("div#view"+n).css("height",parseInt(e('[data-widget-id="'+n+'"]').css("height"))-100-s),e("div#view"+n).css("width",parseInt(e('[data-widget-id="'+n+'"]').css("width"))-25),e("#example"+t).length&&e("#example"+t).css("height",e("div#view"+n).css("height")),4==n&&e(document).trigger("PolyclinicChart:resize",[{target:this,id:n}]),5==n&&e(document).trigger("PieChart:resize",[{target:this,id:n}]),6==n&&e(document).trigger("LineChart:resize",[{target:this,id:n}]),7==n&&e(document).trigger("ScatterChart:resize",[{target:this,id:n}]),8==n&&e(document).trigger("RadarChart:resize",[{target:this,id:n}]),e(document).trigger("view"+n+":resize",[{target:this,id:n}]),window.dispatchEvent(new Event("resize"))}},serialize_params:function(e,t){var i=e.data("widget-params");return"Custom"==e.data("widget-type")&&(i="Custom"==e.data("widget-type")?e.data("widget-params"):JSON.stringify(e.data("widget-params"))),"List"==e.data("widget-type")&&(i=e.data("widget-params")),{WID:e.data("widget-wid"),Name:e.data("widget-name"),Type:e.data("widget-type"),LinkHandling:e.data("widget-linkhandling"),Model:e.data("widget-model"),ModelId:e.data("widget-model-id"),Params:i,Col:t.col,Row:t.row,SizeX:t.size_x,SizeY:t.size_y}},autogenerate_stylesheet:!0}).data("gridster"),s.editable||a.disable_resize(),s.draggable||a.disable(),a.remove_all_widgets();var t=d.length+1,i=r("widget"+t,t),g=[i,12,8,0,12],l=a.add_widget.apply(a,g);e('[data-widget-id="'+t+'"]').css("height",790),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(p(t)),e("div#view"+t).css("overflow","hidden");initMap(t);map.updateSize(),t+=1,i=r("widget"+t,t),g=[i,12,8,0,12],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html('<table id="table'+t+'" class="display" cellspacing="0" width="100%"></table>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <div class="row"><button id="rotate-left"><i class="fa fa-undo"></i></button><button id="rotate-right"><i class="fa fa-repeat"></i></button><button id="rotate-around-rome">Rotate around Rome</button><button id="pan-to-london">Pan to London</button><button id="elastic-to-moscow">Elastic to Moscow</button><button id="bounce-to-istanbul">Bounce to Istanbul</button><button id="spin-to-rome">Spin to Rome</button><button id="fly-to-bern">Fly to Bern</button><button id="spiral-to-madrid">Spiral to Madrid</button></div>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <table id="example" class="display" cellspacing="0" style="width: 100%; height: 300px; margin: 0 auto"></table>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <table id="example2" class="display" cellspacing="0" style="width: 100%; height: 300px; margin: 0 auto"></table>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <table id="example3" class="display" cellspacing="0" style="width: 100%; height: 300px; margin: 0 auto"></table>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <table id="example4" class="display" cellspacing="0" style="width: 100%; height: 300px; margin: 0 auto"></table>'),t+=1,i=r("widget"+t,t),g=[i,12,8],l=a.add_widget.apply(a,g),d.push({widgetName:"widget"+t,wNum:t,ID:t}),e("#view"+t).html(' <table id="example5" class="display" cellspacing="0" style="width: 100%; height: 300px; margin: 0 auto"></table>')};e(document.body).on("click","i[delete-widget]",function(t){var i=e(this).data("delete-widget");a.remove_widget(e("[data-widget-id="+i+"]")),e(document).trigger("layoutHandler:end",[{target:this,wNum:i}]),d=d.filter(function(e){return e.wNum!==i})});var l=function(){var e=d.length+1,t=r("widget"+e,e),i=[t,12,8];a.add_widget.apply(a,i);return d.push({widgetName:"widget"+e,wNum:e,ID:e}),e},o=function(){return a.serialize()},r=function(e,t){var i=t,a='<i delete-widget data-delete-widget="'+i+'" style="color:#ccc;" class="fa fa-trash fa-fw fa-2x pull-right"></i><i setting-widget data-setting-widget="'+i+'" style="color:#ccc;" class="fa fa-cog fa-fw fa-2x pull-right"></i>';return'<li id ="'+i+'" widget-main-id="'+i+'"  data-widget-id="'+i+'"   d><div id="widget-main-panel'+i+'" class="panel panel-default" ><div id="widget-main-panel-heading'+i+'" class="panel-heading"><span class="display">'+e+"</span>"+a+'</div><div id="view'+i+'" data-widget-displayname="'+e+'" class="portlet-body panel-body"></div></li>'},p=function(e){return'<div id="widget-googlemap-main-id-'+e+'" class="map-container"><div id="widget-googlemap-main-id-map-'+e+'" class="map-map" style="height:650px"> MAP </div><div class="col-xs-12" style="height:100%; overflow:auto; padding: 0px;"><div id="MapMarkerButtons" class="mob-map-container"></div><div id="MapMarkerCommon" class="map-readout"></div><div id="MapMarkerSpecifics" class="mob-map-readout"></div><input id="MapMarkerTrailStartTime" type="hidden" value="-1d"/><input id="MapMarkerTrailEndTime" type="hidden" value="+1d"/></div><div id="widget-googlemap-main-id-progress" class="map-progress">...</div><div id="widget-googlemap-main-id-home" class="mob-map-toolbar">...</div><div id="widget-googlemap-main-id-debug" class="mob-map-debug">...</div><div id="widget-googlemap-main-id-gps" class="mob-map-gps">...</div></div>'};return{init:g,addNewWidget:l,serialize:o,goToCoord:i}}}(jQuery);